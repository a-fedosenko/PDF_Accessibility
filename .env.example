# PDF Accessibility Solutions - Environment Configuration Example
# Copy this file to .env and fill in your actual values
# DO NOT COMMIT .env FILE TO VERSION CONTROL

# ========================================
# AWS Configuration
# ========================================

# AWS Credentials (For production deployment)
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test

# AWS Region (Choose region with Bedrock availability)
# Recommended: us-east-1, us-west-2
AWS_REGION=us-east-1

# AWS Account ID (For production deployment)
AWS_ACCOUNT_ID=123456789012

# ========================================
# Adobe PDF Services API Credentials
# ========================================
# Get your credentials from: https://developer.adobe.com/document-services/apis/pdf-services/

PDF_SERVICES_CLIENT_ID=your-adobe-client-id-here
PDF_SERVICES_CLIENT_SECRET=your-adobe-client-secret-here

# ========================================
# S3 Bucket Configuration
# ========================================

# PDF-to-PDF Processing Bucket
# Format: pdfaccessibility-{unique-id}
S3_BUCKET_NAME=pdfaccessibility-local

# PDF-to-HTML Processing Bucket
# Format: pdf2html-bucket-{account}-{region}
BDA_S3_BUCKET=pdf2html-bucket-local

# ========================================
# AWS Bedrock Configuration
# ========================================

# Bedrock Data Automation Project ARN (for PDF-to-HTML)
# Format: arn:aws:bedrock:{region}:{account}:data-automation-project/{project-id}
BDA_PROJECT_ARN=arn:aws:bedrock:us-east-1:123456789012:data-automation-project/your-project-id

# Bedrock Model IDs
BEDROCK_MODEL_ID=us.amazon.nova-lite-v1:0
BEDROCK_TITLE_MODEL_ID=us.amazon.nova-pro-v1:0

# Bedrock Model ARNs for Image Analysis and Link Generation
# Format: arn:aws:bedrock:{region}:{account}:inference-profile/{model-id}
BEDROCK_MODEL_ARN_IMAGE=arn:aws:bedrock:us-east-1:123456789012:inference-profile/us.anthropic.claude-3-5-sonnet-20241022-v2:0
BEDROCK_MODEL_ARN_LINK=arn:aws:bedrock:us-east-1:123456789012:inference-profile/us.anthropic.claude-3-haiku-20240307-v1:0

# ========================================
# AWS Step Functions
# ========================================

# Step Functions State Machine ARN (for PDF-to-PDF workflow)
# Format: arn:aws:states:{region}:{account}:stateMachine:MyStateMachine
STATE_MACHINE_ARN=arn:aws:states:us-east-1:123456789012:stateMachine:MyStateMachine

# ========================================
# AWS Secrets Manager
# ========================================

# Secret name for Adobe credentials
SECRET_NAME=/myapp/client_credentials

# ========================================
# Docker Configuration
# ========================================

# Docker network name
DOCKER_NETWORK=pdf-accessibility-network

# Network subnet for production
SUBNET_CIDR=172.20.0.0/16

# ========================================
# ECR Configuration (Production Only)
# ========================================

# ECR Registry URL
# Format: {account-id}.dkr.ecr.{region}.amazonaws.com
ECR_REGISTRY=123456789012.dkr.ecr.us-east-1.amazonaws.com

# ECR Repository Names
ECR_REPOSITORY_AUTOTAG=pdf-autotag
ECR_REPOSITORY_ALTTEXT=pdf-alttext
ECR_REPOSITORY_PDF2HTML=pdf2html-lambda
ECR_REPOSITORY_JAVA_LAMBDA=java-lambda
ECR_REPOSITORY_SPLIT_PDF=split-pdf-lambda
ECR_REPOSITORY_ADD_TITLE=add-title-lambda
ECR_REPOSITORY_CHECKER_BEFORE=checker-before
ECR_REPOSITORY_CHECKER_AFTER=checker-after

# Image Tag (use git commit hash or version number in production)
IMAGE_TAG=latest

# ========================================
# Application Configuration
# ========================================

# ========================================
# PDF Processing Limits
# ========================================

# Maximum pages per PDF document (0 = unlimited, recommended: 10000)
MAX_PAGES_PER_PDF=10000

# Number of pages per chunk when splitting large PDFs (recommended: 200)
PDF_CHUNK_SIZE=200

# Maximum PDF file size in bytes (0 = unlimited)
# Default: 5GB = 5368709120 bytes
# Recommended: Set based on your Lambda/ECS memory limits
MAX_PDF_FILE_SIZE=5368709120

# Maximum image size for Bedrock processing in bytes
# Bedrock limit is ~20MB, recommended: 20000000 (20 MB)
MAX_IMAGE_SIZE=20000000

# ========================================
# User Upload Limits (Frontend)
# ========================================

# Maximum uploads per user (0 = unlimited, recommended: 1000)
MAX_UPLOADS_PER_USER=0

# Upload quota reset period in days (0 = never reset)
UPLOAD_QUOTA_RESET_DAYS=30

# Maximum concurrent uploads per user (recommended: 5)
MAX_CONCURRENT_UPLOADS=5

# ========================================
# API Gateway Limits
# ========================================

# API Gateway throttling rate limit (requests per second)
# Default AWS limit: 10000, recommended for high load: 100000
API_THROTTLE_RATE_LIMIT=100000

# API Gateway burst limit
# Default AWS limit: 5000, recommended for high load: 50000
API_THROTTLE_BURST_LIMIT=50000

# ========================================
# Lambda Function Configuration
# ========================================

# Lambda timeout in seconds (AWS max: 900 = 15 minutes)
LAMBDA_TIMEOUT=900

# Lambda memory size in MB (AWS range: 128-10240)
# Recommended: 3008 for large PDF processing
LAMBDA_MEMORY_SIZE=3008

# Lambda CPU units (for containerized Lambda)
LAMBDA_CPU=1024

# Lambda total memory for Java Lambda (MB)
LAMBDA_MEMORY=2048

# Lambda concurrent execution limit (0 = account default, typically 1000)
LAMBDA_CONCURRENT_EXECUTIONS=1000

# ========================================
# ECS Task Configuration
# ========================================

# ECS Fargate vCPU (256, 512, 1024, 2048, 4096)
ECS_TASK_CPU=2048

# ECS Fargate Memory in MB (depends on CPU, max: 30720)
ECS_TASK_MEMORY=4096

# ECS CPU soft limit (for EC2 launch type)
ECS_TASK_CPU_RESERVATION=1024

# ECS Memory soft limit in MB (for EC2 launch type)
ECS_TASK_MEMORY_RESERVATION=2048

# ECS Task timeout in seconds (recommended: 3600 = 1 hour)
ECS_TASK_TIMEOUT=3600

# ========================================
# Bedrock Model Limits
# ========================================

# Maximum tokens for Bedrock text generation
# Nova Pro/Lite max: ~300k, recommended for responses: 4096
MAX_OUTPUT_TOKENS=4096

# Maximum tokens for title generation (recommended: 500)
MAX_TITLE_TOKENS=500

# Maximum tokens for alt-text generation (recommended: 300)
MAX_ALT_TEXT_TOKENS=300

# Maximum tokens for table remediation (recommended: 2000)
MAX_TABLE_REMEDIATION_TOKENS=2000

# Bedrock request timeout in seconds (recommended: 120)
BEDROCK_REQUEST_TIMEOUT=120

# ========================================
# API Quota Management
# ========================================

# Adobe API monthly quota limit (0 = no limit, typically 500-1000 for free tier)
# Set this to your Adobe API quota to enable monitoring and alerts
ADOBE_API_QUOTA_LIMIT=0

# Email address to receive quota alerts
# Leave empty to skip email notifications (still logs to CloudWatch)
QUOTA_ALERT_EMAIL=your-email@example.com

# Quota warning threshold (default: 80% of limit)
QUOTA_WARNING_THRESHOLD=0.8

# Quota critical threshold (default: 95% of limit)
QUOTA_CRITICAL_THRESHOLD=0.95

# ========================================
# Monitoring & Logging
# ========================================

# CloudWatch Log Group Prefix
LOG_GROUP_PREFIX=/aws/pdf-accessibility

# Log Level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# ========================================
# Optional: Frontend UI Configuration
# ========================================

# Frontend URL (if deploying UI)
FRONTEND_URL=http://localhost:3000

# API Gateway URL (for production)
API_GATEWAY_URL=https://your-api-gateway-url.execute-api.us-east-1.amazonaws.com

# Nginx Configuration (for production with frontend profile)
NGINX_PORT=80
NGINX_SSL_PORT=443

# ========================================
# Cost Optimization Settings
# ========================================

# Enable/disable NAT Gateway (local development: false)
ENABLE_NAT_GATEWAY=false

# S3 Lifecycle Policy Days
S3_GLACIER_TRANSITION_DAYS=90
S3_EXPIRATION_DAYS=365

# ========================================
# Development/Testing
# ========================================

# Enable debug mode
DEBUG=1

# Test PDF file path (for local testing)
TEST_PDF_PATH=./test-files/sample.pdf
